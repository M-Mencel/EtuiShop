@model CartViewModel

@{
    ViewData["Title"] = "Cart Overview";
}

@foreach (var item in Model.CartItems)
{


        <div class="col">

            <div class="card mb-4">
              <div class="card-body p-4">

                <div class="row align-items-center">
                  <div class="col-md-2">
                    <img src="~/media/products/@item.Image" class="img-fluid" alt="">
                  </div>
                  <div class="col-md-2 d-flex justify-content-center">
                    <div>
                      <p class="small text-muted mb-4 pb-2">Name</p>
                      <p class="lead fw-normal mb-0">@item.ProductName</p>
                    </div>
                  </div>
                  <div class="col-md-2 d-flex justify-content-center">

                  </div>
                  <div class="col-md-2 d-flex justify-content-center">
                    <div>
                      <p class="small text-muted mb-4 pb-2">Ilość</p>
                      <p class="lead fw-normal mb-0">@item.Quantity</p>
                    </div>
                  </div>
                  <div class="col-md-2 d-flex justify-content-center">
                    <div>
                      <p class="small text-muted mb-4 pb-2">Cena</p>
                      <p class="lead fw-normal mb-0">@item.Price.ToString("C2")</p>
                    </div>
                  </div>
                  <div class="col-md-2 d-flex justify-content-center">
                    <div>
                      <p class="small text-muted mb-4 pb-2">Suma</p>
                       <p class="lead fw-normal mb-0">@Model.CartItems.Where(x => x.ProductId == item.ProductId).Sum(x => x.Quantity * x.Price).ToString("C2")</p>
                    </div>
                  </div>
                </div>

              </div>
            </div>

          

          </div>

}

<div class="card mb-5">
    <div class="card-body p-4">

        <div class="float-end">
            <p class="mb-0 me-5 d-flex align-items-center">
                <span class="small text-muted me-2">Suma:</span>
                <span class="lead fw-normal">@Model.GrandTotal.ToString("C2")</span>
            </p>
        </div>

    </div>
</div>

<div class="d-flex justify-content-end">
    <a asp-controller="Checkout" asp-action="Index" class="btn btn-sm btn-outline-success">Zapłać</a>
</div>